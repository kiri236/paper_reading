{"layout":"logicalStructure","root":{"data":{"text":"<p>ELMMvVCC</p>","expand":true,"uid":"18a72d37-03a4-452f-a0d7-e8133dcc6965","richText":true,"isActive":false,"imgMap":{"smm_img_key_672a491b-9f8f-431b-948f-47d9a4eb4d27":"data:image/png;base64,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"}},"children":[{"data":{"text":"<p>问题</p>","uid":"c6c9c678-59be-4fb8-8ec2-c586adaf144b","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>随着transformer层数的深入,[ANS]token对视觉token的attention呈现下降趋势</p>","uid":"5845cb74-56aa-4511-920f-d0f65ecdf874","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>图像中存在如重复模式,纹理及颜色均匀等冗余</p>","expand":true,"richText":true,"isActive":false,"uid":"ce795b44-0ae3-484e-81fb-3c2df7b34615"},"children":[]}]},{"data":{"text":"<p>Visual Context Compresser</p>","expand":true,"richText":true,"isActive":false,"uid":"4231f003-a3a4-4a75-929f-640c0bc609da"},"children":[{"data":{"text":"<p>给定第k层transformer,将其隐空间的视觉token<span class=\"ql-formula\" data-value=\"H_k\\in \\mathcal{R}^{B\\times C\\times L}\">﻿<span contenteditable=\"false\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>H</mi><mi>k</mi></msub><mo>∈</mo><msup><mi mathvariant=\"script\">R</mi><mrow><mi>B</mi><mo>×</mo><mi>C</mi><mo>×</mo><mi>L</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">H_k\\in \\mathcal{R}^{B\\times C\\times L}</annotation></semantics></math></span></span>﻿</span>映射为<span class=\"ql-formula\" data-value=\"\\hat{H}_k\\in R^{B\\times C\\times L_{out}}\">﻿<span contenteditable=\"false\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>H</mi><mo>^</mo></mover><mi>k</mi></msub><mo>∈</mo><msup><mi>R</mi><mrow><mi>B</mi><mo>×</mo><mi>C</mi><mo>×</mo><msub><mi>L</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\hat{H}_k\\in R^{B\\times C\\times L_{out}}</annotation></semantics></math></span></span>﻿</span></p>","uid":"e8db05f9-02b9-40db-b0d7-330ae626da1f","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>这个映射函数选择平均池化层效果最优</p>","uid":"1e0baa96-3ee5-42c1-8130-62021ee429d2","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>token的压缩比计算公式为</p>","expand":true,"richText":true,"isActive":false,"uid":"ba0f7a24-9e39-4afe-8be9-fa892464f2ee","image":"smm_img_key_672a491b-9f8f-431b-948f-47d9a4eb4d27","imageTitle":"","imageSize":{"width":524,"height":126.79883381924199,"custom":true}},"children":[]}]},{"data":{"text":"<p>LLaVolta</p>","expand":true,"richText":true,"isActive":false,"uid":"3c235208-0725-41fb-bdd3-c9141d58854a"},"children":[{"data":{"text":"<p>分阶段视觉上下文压缩</p>","uid":"1f8105e5-1aaf-4610-9c81-e5865f171c4c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>设共有<span class=\"ql-formula\" data-value=\"N_s\">﻿<span contenteditable=\"false\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>N</mi><mi>s</mi></msub></mrow><annotation encoding=\"application/x-tex\">N_s</annotation></semantics></math></span></span>﻿</span>个阶段,第i个阶段的压缩比为<span class=\"ql-formula\" data-value=\"r_i\">﻿<span contenteditable=\"false\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">r_i</annotation></semantics></math></span></span>﻿</span>,随着i增加<span class=\"ql-formula\" data-value=\"r_i\">﻿<span contenteditable=\"false\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">r_i</annotation></semantics></math></span></span>﻿</span>减小,到最后一个阶段不进行压缩</p>","uid":"941be97d-4df8-4296-917e-598ec35891a6","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>训练主要分为三阶段</p>","uid":"227e10df-988e-4adb-bd50-2b08cff4c5fe","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>重度压缩</p>","uid":"246dbb52-8c71-46f5-a804-0c2ef4b032e3","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>在训练的前三分之一epoch,MLLM以高压缩率(500%)启动,Visual Context Compresser应用于LLM的浅层 ,使用较大的池化步长</p>","uid":"a22c8190-6720-42f6-a2c9-011e89a0b5c4","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>轻度压缩</p>","expand":true,"richText":true,"isActive":false,"uid":"4d9d60c7-fc41-4cbb-b81c-30ef221e3cac"},"children":[{"data":{"text":"<p>中间三分之一epoch中,Visual Context Compresser应用于LLM的深层,池化步长较重度压缩要小</p>","uid":"2e8cf852-050f-45bf-b33e-82b668d5dfcb","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>无/轻微压缩</p>","expand":true,"richText":true,"isActive":false,"uid":"b4ac7ba1-500e-49d0-8cb5-398baa6d0735"},"children":[{"data":{"text":"<p>最后三分之一的epoch中,不适用压缩或轻微压缩,这是为了保证训练和推理的一致性</p>","uid":"a149b466-7c9c-4496-bae7-e9c629dbe328","expand":true,"richText":true,"isActive":false},"children":[]}]}]}]},{"data":{"text":"<p>压缩也可以deeper或者wider</p>","expand":true,"richText":true,"isActive":false,"uid":"e6063a04-f6d9-41a2-b6e1-c8557acaa982"},"children":[{"data":{"text":"<p>deeper指定是增加K(transformer的数量)</p>","uid":"c90f2008-e28f-4d47-a5bd-2b80a5173d30","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>wider指的是减少pooling步长</p>","expand":true,"richText":true,"isActive":false,"uid":"1c8e3e29-5e80-4352-bfc1-5aafb3553586"},"children":[]}]}]}]},{"data":{"text":"<p>性能</p>","expand":true,"richText":true,"isActive":false,"uid":"8b7f8a48-4e4d-4d3f-ba9f-42bfb20d2724"},"children":[{"data":{"text":"<p>以Vicuna-v1.5-7B为语言模型,使用预训练的CLIP-ViT视觉编码器</p>","uid":"46ddfffe-3632-4a2c-a36f-b435ab5e3c13","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>降低了19%的训练成本,且性能超越了无压缩的baseline</p>","uid":"acfaf656-4edf-4423-a25e-d6937dbe5b69","expand":true,"richText":true,"isActive":false},"children":[]}]}]}],"smmVersion":"0.14.0-fix.1"},"theme":{"template":"classic4","config":{}},"view":{"transform":{"scaleX":1,"scaleY":1,"shear":0,"rotate":0,"translateX":-517,"translateY":205,"originX":0,"originY":0,"a":1,"b":0,"c":0,"d":1,"e":-517,"f":205},"state":{"scale":1,"x":-517,"y":205,"sx":-484,"sy":-206}}}